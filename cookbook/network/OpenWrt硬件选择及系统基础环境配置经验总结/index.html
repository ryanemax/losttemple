<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<meta name="description" content="Arch, Nova, Association, Science, The ship of information era.-Anas IT Inc.|刘雨飏,安纳斯联盟创始人,全栈工程师,CIO,Ryane">
<meta name="keywords" content="|刘雨飏,安纳斯联盟创始人,全栈工程师,CIO,Ryane">
<meta name="author" content="刘雨飏, the Founder of ANAS">
<meta name="generator" content="Hugo 0.17" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="stylesheet" href="http://cio.anasit.com/css/style.css" type="text/css">
<link rel="alternate" href="http://cio.anasit.com/index.xml" type="application/rss+xml" title="刘雨飏@ANAS联盟">
<title>OpenWrt硬件选择及系统基础环境配置经验总结 - 刘雨飏@ANAS联盟</title>

<link rel="stylesheet" href="http://cio.anasit.com//css/code/monokai.css">
<script src="http://cio.anasit.com//js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript" charset="utf-8">
var getElementsByClass = function(searchClass,node,tag) {
	var classElements = new Array();
	if ( node == null )
		node = document;
	if ( tag == null )
		tag = '*';
	var els = node.getElementsByTagName(tag);
	var elsLen = els.length;
	var pattern = new RegExp("(^|\\s)"+searchClass+"(\\s|$)");
	for (i = 0, j = 0; i < elsLen; i++) {
		if ( pattern.test(els[i].className) ) {
			classElements[j] = els[i];
			j++;
		}
	}
	return classElements;
}
window.onload=function(){
	var obj1=document.getElementById("blink1");	
	var obj2=document.getElementById("blink2");	
	var timer=null;
		var i1=0;
		var i2=0;
		clearInterval(timer);

		timer=setInterval(function(){
			obj1.innerHTML=i1++%2?"&nbsp;":"_";
			obj2.innerHTML=i2++%2?"&nbsp;":"_";
			false&&clearInterval(timer);
		},700);
};
</script>

</head>
<body>

	<div class="container" style="margin-right:28px;margin-top:4px;float:right;text-align:right;">
		
		<a href="https://github.com/ryanemax"><img src="http://cio.anasit.com//images/github2-dreamstale35.png"></a>
		
		
		
		<a href="https://twitter.com/ryanemax"><img src="http://cio.anasit.com//images/twitter-dreamstale71.png"></a>
		
		
		
		<a href="https://www.linkedin.com/in/ryanemax"><img src="http://cio.anasit.com//images/linkedin-dreamstale45.png"></a>
		
		<a href="http://cio.anasit.com//index.xml"><img src="http://cio.anasit.com//images/feed-dreamstale27.png"></a>
	</div>
<header>
  <div class="container">
    <a class="path" href="http://cio.anasit.com/">[刘雨飏@ANAS联盟]</a>
		<span class="caret"># <span id="blink1">_</span></span>
  </div>

</header>


<div class="container">


<main role="main" class="article">
  
<article class="single" itemscope itemtype="http://schema.org/BlogPosting">
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2015-10-21">October 21, 2015</time></span>


    <span class="key">in</span>
    <span class="val">

        <a href="http://cio.anasit.com/categories/cookbook/network">cookbook/network</a>

    </span>


    <br>
    <span class="key">tags:</span>
    <span class="val">

        <a href="http://cio.anasit.com/tags/openwrt">openwrt</a>

    </span>

  </div>
  <h1 class="headline" itemprop="headline">OpenWrt硬件选择及系统基础环境配置经验总结</h1>
  <section class="body" itemprop="articleBody">
    

<h1 id="一-基础环境选择及搭建">一、基础环境选择及搭建</h1>

<h2 id="1-支持硬件设备列表">1.支持硬件设备列表：</h2>

<p><a href="http://wiki.openwrt.org/toh/start#supported.hardware.-.router.type">http://wiki.openwrt.org/toh/start#supported.hardware.-.router.type</a></p>

<ul>
<li>最佳：</li>
</ul>

<p>联想 newifi mini 1200M AC 智能无线路由器 双频千兆穿墙
<a href="http://www.right.com.cn/FORUM/thread-150726-1-1.html">newifi mini纯净版OpenWRT兼容内核固件，集成rt2860v2、mt76x2e驱动</a></p>

<p>小米路由器mini：
<a href="http://ngiux.com/miwifi-mini-openwrt-openvpn/">http://ngiux.com/miwifi-mini-openwrt-openvpn/</a>
<a href="http://blog.csdn.net/huyaoyu/article/details/42810383">http://blog.csdn.net/huyaoyu/article/details/42810383</a>
<a href="http://www.tianruosk.com/technical/yjwj/1904.html">http://www.tianruosk.com/technical/yjwj/1904.html</a></p>

<ul>
<li>可选：</li>
</ul>

<p>TL-WR842ND
<a href="http://wiki.openwrt.org/toh/tp-link/tl-wr842nd">http://wiki.openwrt.org/toh/tp-link/tl-wr842nd</a></p>

<p>TP-LINK WR703N
<a href="http://www.jb51.net/network/113081.html">http://www.jb51.net/network/113081.html</a></p>

<p>番茄dualwan：
<a href="http://detail.1688.com/offer/1277654521.html">http://detail.1688.com/offer/1277654521.html</a></p>

<h2 id="2-系统安装">2.系统安装</h2>

<p>设备选型：Newifi Mini Y1版本
系统选型：小云xCloud V2.1.0.5900
安装工具：路由助手 1.0.13</p>

<h2 id="3-开启ssh权限">3.开启SSH权限</h2>

<p>高级设置-系统-管理权，分别设置Lan/Wan两个ssh访问权限</p>

<h2 id="4-登录配置opkg">4.登录配置opkg</h2>

<p><strong>libc安装</strong></p>

<pre><code class="language-bash">cd /tmp

wget http://mirrors.ustc.edu.cn/openwrt/barrier_breaker/14.07/ramips/mt7620a/packages/base/libc_0.9.33.2-1_ramips_24kec.ipk

## 安装libc
opkg install libc_0.9.33.2-1_ramips_24kec.ipk
</code></pre>

<pre><code class="language-bash">ssh 192.168.99.1
opkg update #更新报错了，考虑更换软件源
#软件源参考，同款xCloud可用源http://www.enjoydiy.com/3199.html
vim /etc/opkg.conf
## opkg.conf start
dest root /opt
dest ram /tmp
lists_dir ext /var/opkg-lists
option overlay_root /overlay

arch all 100
arch ramips_24kec 200
arch ramips 300
arch mips 400
arch unkown 500

src/gz barrier_breaker_base http://mirrors.ustc.edu.cn/openwrt/barrier_breaker/14.07/ramips/mt7620a/packages/base
src/gz barrier_breaker_luci http://mirrors.ustc.edu.cn/openwrt/barrier_breaker/14.07/ramips/mt7620a/packages/luci
src/gz barrier_breaker_management http://mirrors.ustc.edu.cn/openwrt/barrier_breaker/14.07/ramips/mt7620a/packages/management
src/gz barrier_breaker_oldpackages http://mirrors.ustc.edu.cn/openwrt/barrier_breaker/14.07/ramips/mt7620a/packages/oldpackages
src/gz barrier_breaker_packages http://mirrors.ustc.edu.cn/openwrt/barrier_breaker/14.07/ramips/mt7620a/packages/packages
src/gz barrier_breaker_routing http://mirrors.ustc.edu.cn/openwrt/barrier_breaker/14.07/ramips/mt7620a/packages/routing
src/gz barrier_breaker_telephony http://mirrors.ustc.edu.cn/openwrt/barrier_breaker/14.07/ramips/mt7620a/packages/telephony
## opkg.conf end
</code></pre>

<h2 id="5-opkg常用命令">5.opkg常用命令</h2>

<pre><code class="language-bash">Package Manipulation:
        update                  Update list of available packages
        upgrade &lt;pkgs&gt;          Upgrade packages
        install &lt;pkgs&gt;          Install package(s)
        configure &lt;pkgs&gt;        Configure unpacked package(s)
        remove &lt;pkgs|regexp&gt;    Remove package(s)
        flag &lt;flag&gt; &lt;pkgs&gt;      Flag package(s)
         &lt;flag&gt;=hold|noprune|user|ok|installed|unpacked (one per invocation)

Informational Commands:
        list                    List available packages
        list-installed          List installed packages
        list-upgradable         List installed and upgradable packages
        list-changed-conffiles  List user modified configuration files
        files &lt;pkg&gt;             List files belonging to &lt;pkg&gt;
        search &lt;file|regexp&gt;    List package providing &lt;file&gt;
        find &lt;regexp&gt;           List packages whose name or description matches
</code></pre>

<pre><code class="language-bash">## 打印帮助
opkg -h

## 更新资源列表
opkg update

## 更新软件版本
opkg upgrade openvpn

## 列出已安装的包
opkg list-installed

## find后安装线上软件
opkg find shadowsocks*
opkg find openvpn*
opkg install openvpn-nossl

## wget后安装本地ipk包
opkg install /tmp/wget_openvpn.ipk
</code></pre>

<h1 id="二-进阶配置">二、进阶配置</h1>

<h2 id="系统清理">系统清理</h2>

<pre><code class="language-bash">## opkg  清理
rm -r /tmp/opkg-*

</code></pre>

  </section>
</article>

	
	<div id="disqus_thread"></div>
<script type="text/javascript">
     
    var disqus_shortname = 'ryn';
    
     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
	
</main>


</div>

<footer>
  <div class="container">
    <span class="copyright">&copy; 2015  刘雨飏@ANAS联盟 - <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></span>
  </div>
</footer>

</body>
</html>

