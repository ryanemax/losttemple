<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Pdf on 刘雨飏@ANAS联盟</title>
    <link>https://ryanemax.github.io/tags/pdf/</link>
    <description>Recent content in Pdf on 刘雨飏@ANAS联盟</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>©2007-2016 Ryn&#39;s Blog</copyright>
    <lastBuildDate>Thu, 31 Mar 2016 20:05:51 +0800</lastBuildDate>
    <atom:link href="https://ryanemax.github.io/tags/pdf/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>如何用markdown生成带目录、页眉、页脚的pdf？ </title>
      <link>https://ryanemax.github.io/study/markdown2pdf/</link>
      <pubDate>Thu, 31 Mar 2016 20:05:51 +0800</pubDate>
      
      <guid>https://ryanemax.github.io/study/markdown2pdf/</guid>
      <description>

&lt;h1 id=&#34;如何用markdown生成带目录-页眉-页脚的pdf:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;如何用markdown生成带目录、页眉、页脚的pdf？&lt;/h1&gt;

&lt;p&gt;&lt;a href=&#34;http://pandoc.org/demos.html&#34;&gt;http://pandoc.org/demos.html&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&#34;todo-list:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;TODO List&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;[OK] 实现基础的md转pdf的shell脚本&lt;/li&gt;
&lt;li&gt;将md转pdf封装成云服务，为整个安纳斯联盟提供&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;相关的转化方式:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;相关的转化方式&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;markdown =&amp;gt; html =&amp;gt; pdf

&lt;ul&gt;
&lt;li&gt;选择/推荐&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;markdown =&amp;gt; latex =&amp;gt; pdf

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://stackoverflow.com/questions/1360869/how-to-use-html-to-print-header-and-footer-on-every-printed-page&#34;&gt;How to use HTML to print header and footer on every printed page?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;pandoc-latex模板:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;pandoc+Latex模板&lt;/h1&gt;

&lt;h2 id=&#34;latex基础:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;latex基础&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.latexstudio.net&#34;&gt;http://www.latexstudio.net&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;推荐字体:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;推荐字体&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;## 建议用于标题的字体
-V mainfont=&amp;quot;思源黑体 CN&amp;quot;

pacman -S adobe-source-han-sans-cn-fonts

## 建议用与特殊段落的字体
-V mainfont=&amp;quot;AR PL New Kai&amp;quot;

pacman -S opendesktop-fonts
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;常用脚本:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;常用脚本&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;## 简单版
pandoc --latex-engine=xelatex README.md -o read.pdf -V mainfont=&amp;quot;思源黑体 CN&amp;quot; --highlight-style pygments
## 带段落与头部
pandoc -N --template=mytemplate.tex --variable mainfont=&amp;quot;Palatino&amp;quot; --variable sansfont=&amp;quot;Century Gothic&amp;quot; --variable monofont=&amp;quot;Consolas&amp;quot; --variable fontsize=12pt --variable version=1.15.2 README.md --latex-engine=xelatex --toc -o readexam.pdf --highlight-style pygments

## 字体变量可省略
pandoc -N --template=mytemplate.tex --variable fontsize=12pt --variable version=1.15.2 README.md --latex-engine=xelatex --toc -o readexam.pdf --highlight-style pygments -V mainfont=&amp;quot;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;代码高亮:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;代码高亮&lt;/h2&gt;

&lt;p&gt;推荐样式：
- pygments&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;--highlight-style kate

--highlight-style pygments

--highlight-style kate

--highlight-style monochrome

--highlight-style espresso

--highlight-style haddock

--highlight-style tango

--highlight-style zenburn
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;常见错误:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;常见错误&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# 报错：缺少latex文件
! LaTeX Error: File etoolbox.sty not found.

apt-get install texlive-latex-extra

pacman -S texlive-latexextra

# 报错：中文不显示错误
pandoc --latex-engine=xelatex README.md -o read.pdf -V mainfont=&amp;quot;SimSun&amp;quot;

## 报错 缺少字体
fontspec error: &amp;quot;font-not-found&amp;quot;
## 查看当前系统字体
fc-list
## 列出所有能被 xetex 使用的字体
fc-list :outline -f &amp;quot;%{family}\n&amp;quot; | sort -u
## 推荐字体
&amp;quot;文泉驿微米黑&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;图片分页问题:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;图片分页问题&lt;/h2&gt;

&lt;p&gt;圖片唯一的問題是，pandoc有時會將表格放在錯誤的位置。因為某些圖片過高，所以pandoc會把他們插入到一個新的空白頁，然後將後面的內容直接查到表格前面，這樣很容易產生錯位。有兩個解決辦法，一是，轉換到latex後，手動修改圖片位置，當然這個比較痛苦；二是在圖片後面加入一個latex的分頁比較\pagebreak，讓後面的內容自動寫到新的一頁上，儘管這樣比較廢紙。&lt;/p&gt;

&lt;h3 id=&#34;手动调整:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;手动调整&lt;/h3&gt;

&lt;h3 id=&#34;latex-figureseries宏包让figure浮动环境支持自动换页:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;LaTeX：figureSeries宏包让figure浮动环境支持自动换页&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;http://bbs.pinggu.org/thread-4487763-1-1.html&#34;&gt;http://bbs.pinggu.org/thread-4487763-1-1.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;通常，我们在写论文插图的时候，都会使用到浮动环境figure，如果插图很多，比如十几个子图构成的图，往往非常麻烦，因为本身浮动环境是无法自动换页的，下面这一宏包可以让浮动环境也可以自动换页了，作者也给出了在IEEE模板里使用的实际样例，有兴趣的用户可以下载试用下。&lt;/p&gt;

&lt;p&gt;选自：&lt;a href=&#34;https://github.com/thomasWeise/figureSeries&#34;&gt;https://github.com/thomasWeise/figureSeries&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&#34;atom编辑器latex常用插件:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;atom编辑器latex常用插件&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;language-latex&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;html-css-尝试中:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;html+css(尝试中)&lt;/h1&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;pandoc READEME.md -f markdown -t html &amp;gt;&amp;gt; temp.html

echo &amp;gt;&amp;gt; &amp;quot;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;md转pdf脚本实现:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;md转pdf脚本实现&lt;/h1&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;#!/bin/sh
message1=&amp;quot;请输入正确格式，如：./genpdf.sh &amp;lt;srcfile&amp;gt; &amp;lt;buildname&amp;gt;&amp;quot;
message2=&amp;quot;例如文件：./genpdf.sh README.md readme&amp;quot;
message3=&amp;quot;例如目录：./genpdf.sh anasinc/department/ depart&amp;quot;
if [ $# -eq 0 ]       ##判断参数是否存在
then
	echo $message1
	echo $message2
	echo $message3
	exit                     ##不存在退出
fi
if [ x$1 = x ]       ##判断参数1是否存在
then
	echo $message1
	echo $message2
	echo $message3
	exit                     ##不存在退出
fi
if [ x$2 = x ]       ##判断参数2是否存在
then
	echo $message1
	echo $message2
	echo $message3
	exit                     ##不存在退出
fi
srcfile=$1
buildname=$2
currentdir=$(pwd)

if [ -d $1 ]
then
	# 如果源文件参数是目录，则获取目录下所有.md文档
	cd $1
	srcfile=$(ls | sed &amp;quot;s:^:`pwd`/:&amp;quot;)
fi

echo $srcfile

cd $currentdir

pandoc -N --template=.tpl/anas.tex --variable fontsize=12pt ${srcfile} --latex-engine=xelatex --toc -o build/${buildname}.pdf --highlight-style kate -V mainfont=&amp;quot;思源黑体 CN&amp;quot; -V sansfont=&amp;quot;思源黑体 CN&amp;quot; -V monofont=&amp;quot;思源黑体 CN&amp;quot;
firefox build/${buildname}.pdf
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;latex模板文件定制:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;latex模板文件定制&lt;/h1&gt;

&lt;h2 id=&#34;模板资源:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;模板资源&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/jgm/pandoc/wiki/User-contributed-templates&#34;&gt;https://github.com/jgm/pandoc/wiki/User-contributed-templates&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;latex基础用法:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;latex基础用法&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://latex-project.org/guides/usrguide.pdf&#34;&gt;https://latex-project.org/guides/usrguide.pdf&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;使用fancy定制页眉页脚:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;使用fancy定制页眉页脚&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://www.ctex.org/documents/packages/layout/fancyhdr.htm&#34;&gt;http://www.ctex.org/documents/packages/layout/fancyhdr.htm&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.ctex.org/documents/packages/layout/fancyhdr.pdf&#34;&gt;http://www.ctex.org/documents/packages/layout/fancyhdr.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;利用 fancyhdr 宏包提供的命令，可以方便的作到：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;自定义页眉和页脚。&lt;/li&gt;
&lt;li&gt;为页眉和页脚加上装饰性的横线。&lt;/li&gt;
&lt;li&gt;页眉和页脚的宽度可以超过正文文本的宽度。&lt;/li&gt;
&lt;li&gt;多行的页眉和页脚。&lt;/li&gt;
&lt;li&gt;奇偶页使用不同格式的页眉和页脚。&lt;/li&gt;
&lt;li&gt;每章的首页使用不同格式的页眉和页脚。&lt;/li&gt;
&lt;li&gt;浮动对象页使用不同格式的页眉和页脚。&lt;/li&gt;
&lt;li&gt;控制页眉和页脚的字体，包括字形，字族，大小写等。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;目录与正文在同一页:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;目录与正文在同一页&lt;/h2&gt;

&lt;p&gt;在目录后$body$前，加入&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-latex&#34;&gt;\newpage
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;正文第一页与页眉重叠:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;正文第一页与页眉重叠&lt;/h2&gt;

&lt;p&gt;最简单的就是正文/$body$前加入&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-latex&#34;&gt;% fix the no.2 page covered by header
\thispagestyle{empty}
\newpage
\itshape{\hspace{1em}}
\\[0.4em]
% end of fix the no.2 page covered by header
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;中文无法自动换行问题:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;中文无法自动换行问题&lt;/h2&gt;

&lt;p&gt;上面问题在与中文行没有被换行，参考了一下&lt;a href=&#34;https://github.com/tzengyuxio/pages/blob/gh-pages/pandoc/pm-template.latex&#34;&gt;Tzeng Yuxio同学的模板&lt;/a&gt;，中文的换行 通过\XeTeXlinebreaklocale &amp;ldquo;zh&amp;rdquo;实现。而在pandoc的缺省模板中是没有这个设置的。因此考虑修改缺省的latex模板。方法如下：&lt;/p&gt;

&lt;p&gt;在模板的这个部分下面加上这一行\XeTeXlinebreaklocale &amp;ldquo;zh&amp;rdquo;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$if(mathfont)$
    \setmathfont(Digits,Latin,Greek){$mathfont$}
$endif$
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;实用案例-添加水印:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;实用案例：添加水印&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://www.ctan.org/pkg/draftwatermark&#34;&gt;http://www.ctan.org/pkg/draftwatermark&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;ftp://ftp.u-aizu.ac.jp/pub/tex/CTAN/macros/latex/contrib/draftwatermark/draftwatermark.pdf&#34;&gt;ftp://ftp.u-aizu.ac.jp/pub/tex/CTAN/macros/latex/contrib/draftwatermark/draftwatermark.pdf&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-latex&#34;&gt;\usepackage[firstpage]{draftwatermark} %此处可选项为firstpage表只有第一页有，若为空则表示所有页面都有水印

\SetWatermarkText{此处为水印内容}%若要多行显示可以用

\SetWatermarkColor{red}

\SetWatermarkColor[rgb]{0,1,0}

\SetWatermarkText{\shortstack{水印第一行\\水印第二行}}
%此WatermarkText作用范围为所在页到下一个\SetWatermarkText设置的页

\SetWatermarkScale{0.3}          %设定大小

\SetWatermarkLightness{0.88}%defaultis0.8
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;参考文章:aa732d2fa204cfa61b995e1838c3ec41&#34;&gt;参考文章&lt;/h1&gt;

&lt;p&gt;&lt;a href=&#34;https://www.douban.com/note/330859852/&#34;&gt;使用pandoc markdown寫作後記&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://yangsan.github.io/articles/latex/pandoc_markdown_pdf.html&#34;&gt;用pandoc-markdown，像写word一样写pdf&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>